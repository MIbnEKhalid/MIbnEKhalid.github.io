<link rel="stylesheet" href="/Assets/Style/Ticket.css">
<style>
/* Track Ticket Specific Styles */
.track-ticket-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  padding-top: 120px; /* Add top padding to account for fixed header */
  min-height: calc(100vh - 200px);
}

.track-ticket-hero {
  text-align: center;
  margin-bottom: 3rem;
  padding: 3rem 2rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
  border-radius: 16px;
  color: white;
  box-shadow: 0 8px 32px rgba(33, 150, 243, 0.3);
}

.track-ticket-hero h1 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  font-weight: 700;
}

.track-ticket-hero p {
  font-size: 1.1rem;
  opacity: 0.9;
  max-width: 600px;
  margin: 0 auto;
}

.ticket-search-section {
  background: var(--dark);
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.ticket-search-section h2 {
  color: var(--text);
  margin-bottom: 1rem;
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.ticket-search-section p {
  color: var(--text-light);
  margin-bottom: 1.5rem;
}

.search-form {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.search-input {
  flex: 1;
  min-width: 250px;
  padding: 0.75rem 1rem;
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
  font-size: 1rem;
  transition: all 0.3s ease;
}

.search-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
}

.search-input::placeholder {
  color: var(--text-light);
}

.search-buttons {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.btn {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(33, 150, 243, 0.4);
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
}

.info-notice {
  background: rgba(33, 150, 243, 0.1);
  border: 1px solid rgba(33, 150, 243, 0.3);
  border-radius: 8px;
  padding: 1rem;
  margin-top: 1rem;
}

.info-notice p {
  margin: 0;
  color: var(--text);
}

.info-notice a {
  color: var(--primary);
  text-decoration: none;
  font-weight: 600;
}

.info-notice a:hover {
  color: var(--secondary);
}

/* Ticket Results */
.ticket-results-section {
  background: var(--dark);
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.ticket-results-section h3 {
  color: var(--text);
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.ticket-results-section .section {
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  box-shadow: none;
}

.ticket-results-section .section p {
  color: var(--text);
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
}

.ticket-results-section .section p i {
  width: 20px;
  margin-right: 0.5rem;
  color: var(--primary);
}

.ticket-results-section .section p strong {
  margin-right: 0.5rem;
  min-width: 140px;
}

.ticket-detail {
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
  color: var(--text);
}

.ticket-detail i {
  width: 20px;
  margin-right: 0.5rem;
  color: var(--primary);
}

.ticket-detail strong {
  margin-right: 0.5rem;
  min-width: 140px;
}

.audit-trail-section {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.audit-trail-header {
  color: var(--text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
  transition: color 0.3s ease;
}

.audit-trail-header:hover {
  color: var(--primary);
}

.audit-trail-header i {
  transition: transform 0.3s ease;
}

.audit-trail-header.collapsed i {
  transform: rotate(180deg);
}

.auditTrailHeader {
  color: var(--text);
  margin: 0;
  font-size: 1.2rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

#auditTrailContainer {
  overflow: hidden;
  transition: max-height 0.3s ease;
}

#resultAuditTrail {
  list-style: none;
  padding: 0;
  margin: 0;
}

#resultAuditTrail li {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 0.5rem;
  color: var(--text-light);
  border-left: 3px solid var(--primary);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.audit-action-info,
.audit-action-update,
.audit-action-created {
  font-weight: 600;
  color: var(--primary);
}

.audit-action-resolved {
  font-weight: 600;
  color: var(--success);
}

.audit-action-error {
  font-weight: 600;
  color: #dc3545;
}

/* Not Found Section */
.not-found-section {
  background: rgba(220, 53, 69, 0.1);
  border: 1px solid rgba(220, 53, 69, 0.3);
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
  text-align: center;
}

.not-found-section h3 {
  color: #dc3545;
  margin-bottom: 1rem;
}

.not-found-section .section {
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  box-shadow: none;
}

.not-found-section .ticket-detail {
  justify-content: center;
  color: var(--text-light);
}

.not-found-section p {
  color: var(--text-light);
  text-align: center;
}

/* Status badges */
.status-badge {
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.status-badge.pending {
  background: rgba(255, 193, 7, 0.2);
  color: #ffc107;
  border: 1px solid rgba(255, 193, 7, 0.3);
}

.status-badge.open {
  background: rgba(33, 150, 243, 0.2);
  color: var(--primary);
  border: 1px solid rgba(33, 150, 243, 0.3);
}

.status-badge.in-progress,
.status-badge.in_progress {
  background: rgba(156, 39, 176, 0.2);
  color: #9c27b0;
  border: 1px solid rgba(156, 39, 176, 0.3);
}

.status-badge.resolved,
.status-badge.closed {
  background: rgba(76, 175, 80, 0.2);
  color: #4caf50;
  border: 1px solid rgba(76, 175, 80, 0.3);
}

.status-badge.on-hold,
.status-badge.on_hold {
  background: rgba(255, 152, 0, 0.2);
  color: #ff9800;
  border: 1px solid rgba(255, 152, 0, 0.3);
}

.status-badge.not-found-status {
  background: rgba(220, 53, 69, 0.2);
  color: #dc3545;
  border: 1px solid rgba(220, 53, 69, 0.3);
}

/* Tooltip styles */
.tooltip {
  position: relative;
  cursor: help;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 200px;
  background-color: var(--darker);
  color: var(--text);
  text-align: center;
  border-radius: 6px;
  padding: 0.5rem;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  margin-left: -100px;
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 0.75rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: var(--darker) transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

.status-icon {
  font-size: 0.75rem;
  opacity: 0.7;
}

/* FAQ Section */
.faq-section {
  background: var(--dark);
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.faq-section h2 {
  color: var(--text);
  margin-bottom: 2rem;
  font-size: 1.8rem;
  text-align: center;
}

.faq-item {
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  margin-bottom: 1rem;
  overflow: hidden;
  transition: all 0.3s ease;
}

.faq-item:hover {
  border-color: var(--primary);
}

.faq-question {
  padding: 1rem 1.5rem;
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
  cursor: pointer;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
}

.faq-question:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--primary);
}

.faq-question::after {
  content: '\f107';
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  transition: transform 0.3s ease;
}

.faq-item.active .faq-question::after {
  transform: rotate(180deg);
}

.faq-answer {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
  background: rgba(255, 255, 255, 0.02);
}

.faq-item.active .faq-answer {
  max-height: 200px;
}

.faq-answer div {
  padding: 1.5rem;
  color: var(--text-light);
  line-height: 1.6;
}

.faq-answer a {
  color: var(--primary);
  text-decoration: none;
}

.faq-answer a:hover {
  color: var(--secondary);
}

.faq-answer ul {
  margin: 1rem 0;
  padding-left: 1.5rem;
}

.faq-answer li {
  margin-bottom: 0.5rem;
}

/* Scroll to Top Button */
.scroll-to-top {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(33, 150, 243, 0.4);
  transition: all 0.3s ease;
  z-index: 1000;
}

.scroll-to-top:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
}

@media (max-width: 768px) {
  .track-ticket-container {
    padding: 1rem;
    padding-top: 100px; /* Adjust top padding for mobile */
  }
  
  .track-ticket-hero {
    padding: 2rem 1rem;
  }
  
  .track-ticket-hero h1 {
    font-size: 2rem;
  }
  
  .search-form {
    flex-direction: column;
  }
  
  .search-input {
    min-width: auto;
  }
  
  .search-buttons {
    justify-content: center;
  }
  
  .ticket-detail {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.25rem;
  }
  
  .ticket-detail strong {
    min-width: auto;
  }
}
</style>

<main class="track-ticket-container">
  <!-- Hero Section -->
  <div class="track-ticket-hero">
    <h1><i class="fas fa-ticket-alt"></i> Support Ticket System</h1>
    <p>Our Ticketing System is Here To Help You Track & Resolve Your Queries Efficiently. If You've Submitted A Ticket, Use The Search Feature Below To Check Its Status.</p>
  </div>

  <!-- Ticket Search Section -->
  <div class="ticket-search-section">
    <h2><i class="fas fa-search"></i> Search Your Ticket</h2>
    <p>Enter Your Ticket Number Below To Check The Status of Your Request:</p>
    <form id="form" class="search-form">
      <input 
        type="text" 
        id="ticketNumber" 
        class="search-input"
        placeholder="Enter Ticket ID (e.g., T000111333)" 
        required 
        minlength="10" 
        maxlength="10" 
        pattern=".{10}" 
      />
      <div class="search-buttons">
        <button class="btn btn-primary" type="submit" id="submit">
          <i class="fas fa-search"></i> Search
        </button>
        <button type="button" class="btn btn-secondary" onclick="clearSearchTicket()">
          <i class="fas fa-times"></i> Clear
        </button>
      </div>
    </form>
    
    <div class="info-notice">
      <p>
        <i class="fas fa-info-circle"></i>
        Need to submit a new ticket? Visit our
        <a href="/Support">Support & Contact</a> page
        and select "Support" as your subject. You'll receive a tracking
        number to monitor your request.
      </p>
    </div>
  </div>

  <!-- Result Message Container -->
  <div id="RedultMessgeCont" class="result-message-container" style="display: none;">
    <div id="RedultMessge" class="result-message">This is a result message.</div>
  </div>
  <!-- Ticket Results Section -->
  <div id="ticketResultsContainer" class="ticket-results-section" style="display: none;">
    <!-- Content will be dynamically populated by Ticket.js -->
  </div>
  <!-- Not Found Section -->
  <div id="notfound" class="not-found-section" style="display: none;">
    <!-- Content will be dynamically populated by Ticket.js -->
  </div>

  <!-- FAQ Section -->
  <div class="faq-section">
    <h2><i class="fas fa-question-circle"></i> Frequently Asked Questions</h2>

    <div class="faq-container" id="faq-container">
      <div class="faq-item">
        <div class="faq-question" data-faq="0">What Is The Support Ticket System?</div>
        <div class="faq-answer">
          <div>Our Support Ticket System Helps You Track And Resolve Queries By Submitting Tickets That Can Be Easily Tracked And Managed.</div>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" data-faq="1">How Do I Check The Status of My Ticket?</div>
        <div class="faq-answer">
          <div>You Can Check The Status Of Your Ticket By Entering The Ticket Number In The Search Bar At The Top Of The Page.</div>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" data-faq="2">Where Can I Retrieve My Ticket Number?</div>
        <div class="faq-answer">
          <div>
            The Ticket Number is generated and provided to you only when you submit a form with "Support" selected as the subject on the <a href="/Support">Support & Contact</a> page. Other form submissions will not generate a ticket number.
          </div>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" data-faq="3">How Can I Submit A New Support Ticket?</div>
        <div class="faq-answer">
          <div>You Can Submit A New Support Ticket By Visiting <a href="/Support">Support & Contact</a> Page.</div>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" data-faq="4">What Do I Do If My Ticket Is Not Found?</div>
        <div class="faq-answer">
          <div>
            <p>If Your Ticket Is Not Found, Please Consider The Following:</p>
            <ul>
              <li>Double-Check The Ticket Number For Accuracy.</li>
              <li>If Your Ticket Was Created More Than 32 Hours Ago, Contact Us Through Social Media Or Submit A New Ticket.</li>
              <li>If It Has Been Just A Few Minutes Or A Few Hours, Don't Worry, We Will Upload The Ticket Within 24 Hours And Reply Within This Time, With A Maximum Of 32 Hours.</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="faq-item">
        <div class="faq-question" data-faq="5">How Can I Track The Progress of My Support Request?</div>
        <div class="faq-answer">
          <div>All Tickets Are Updated With The Latest Progress In Real-Time. You Can See Any Changes In The Ticket Status Under "Ticket Details".</div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Scroll to Top Button -->
<button class="scroll-to-top" onclick="scrollToTop()" style="display: none;" id="scrollToTopBtn">
  <i class="fas fa-arrow-up"></i>
</button>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // FAQ Item Toggle
  document.querySelectorAll('.faq-question').forEach(item => {
    item.addEventListener('click', function() {
      const faqItem = this.parentNode;
      faqItem.classList.toggle('active');
    });
  });

  // Scroll to Top Button
  window.addEventListener('scroll', function() {
    const scrollBtn = document.getElementById('scrollToTopBtn');
    if (window.pageYOffset > 300) {
      scrollBtn.style.display = 'flex';
    } else {
      scrollBtn.style.display = 'none';
    }
  });
});

function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}
</script>

<script src="/Assets/Scripts/Ticket.js"></script>
